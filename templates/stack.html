<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='CSS/stack.css') }}">
  <style>
    body {
      height: 100vh;
      background-image: url("{{ url_for('static', filename='background/background.png') }}");
      background-size: cover; 
      background-position: center; 
      background-repeat: no-repeat; 
      padding-top: 100px;
    }
  </style>
</head>
<body>

  <div>
    <nav>
        <ul>
            <li><a href="/">HOME</a></li>
            <li><a href="/works" class="hlght">LIBRARY</a></li>
            <li><a href="/contactus">CONTACT US</a></li>
        </ul>
        <div class="about-us-container">
            <a href="/aboutus">ABOUT US</a>
            <img class="logo" src="{{ url_for('static', filename='background/Logo1.png') }}">
        </div>
    </nav>
  </div>

  <main>
    <div class="left-main">
      <p class="title">STACK</p>
    </div>

    <div class="right-main">
      <div class="steps-section" id="steps">
        <!-- Steps will be dynamically inserted here -->
      </div>

      <div class="input-section">
        <input class="input-text" id="expression" type="text" placeholder="KINDLY INPUT YOUR TEXT" autocomplete="off" required>
        <button class="infix-postfix" onclick="convertExpression('infix_to_postfix')">INFIX TO POSTFIX</button>
        <button class="postfix-infix" onclick="convertExpression('postfix_to_infix')">POSTFIX TO INFIX</button>
        <button class="infix-prefix" onclick="convertExpression('infix_to_prefix')">INFIX TO PREFIX</button>
      </div>
    </div>
  </main>

  <script>
    function convertExpression(conversionType) {
        let expression = document.getElementById("expression").value;
        
        if (!expression.trim()) {
            alert("Please enter an expression!");
            return;
        }

        fetch("/work2", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ expression: expression, conversion_type: conversionType })
        })
        .then(response => {
            if (!response.ok) {
                throw new Error("Network response was not ok");
            }
            return response.json();
        })
        .then(data => {
            let stepsContainer = document.getElementById("steps");
            stepsContainer.innerHTML = "";  // Clear previous steps

            if (data.steps && Array.isArray(data.steps)) {
                if (data.steps.length > 0) {
                    // Populate the steps
                    data.steps.forEach(step => {
                        let stepDiv = document.createElement("div");
                        stepDiv.className = "steps-container";
                        stepDiv.textContent = step;
                        stepsContainer.appendChild(stepDiv);
                    });
                } else {
                    // If there are no steps, show this message
                    stepsContainer.innerHTML = "No steps available for this expression or invalid expression.";
                }
            } else {
                // If 'steps' is not an array or is missing
                stepsContainer.innerHTML = "Unexpected response format or invalid expression.";
            }
        })
        .catch(error => {
            console.error("Error:", error);
            let stepsContainer = document.getElementById("steps");
            stepsContainer.innerHTML = "An error occurred: " + error.message;  // Show error message to user
        });
    }
</script>


</body>
</html>
